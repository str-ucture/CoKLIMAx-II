

<!DOCTYPE html>
<html class="writer-html5" lang="de" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Landsat-Daten: Erkunden und Herunterladen mit landsatxplore &mdash; Coklimax 1.0.0 Dokumentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=822aaed9" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=f029ec32"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../_static/translations.js?v=9bf55d28"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Stichwortverzeichnis" href="../../genindex.html" />
    <link rel="search" title="Suche" href="../../search.html" />
    <link rel="next" title="Visualization Options Library" href="../../rst_jupyter_bibliothek/visualizations/index.html" />
    <link rel="prev" title="Sentinel 2 - Workflow" href="02-sentinel2-without-esri.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Coklimax
              <img src="../../_static/coklimax_logo_new.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Dokumentation durchsuchen" aria-label="Dokumentation durchsuchen" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Inhalte:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rst_inhalte/01-softwarekenntnisse.html">Notwendige Software und Kenntnisse</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst_inhalte/02-kurselemente.html">Die Kurs-Elemente</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst_inhalte/03-cds.html">Der Copernicus Climate Data Store (CDS)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Kurs 1:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rst_kurs1/01-cds-api-installieren-und-herunterladen.html">CDS API Installation und Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst_kurs1/02-netcdf-einfuhrung.html">NetCDF Einführung</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Kurs 2:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../kurs2_einfache_cds/01-satellite-lake-water-level.html">Wasserstände von Seen abgleitet aus Satellitendaten</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kurs2_einfache_cds/02-satellite-lake-water-temperature.html">Seewassertemperatur aus Satellitendaten abgeleitet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kurs2_einfache_cds/03-sis-temperature-statistics.html">Temperaturstatistiken für Europa</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">The Jupyter Notebook Bibliothek:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../rst_jupyter_bibliothek/index.html">Über CoKLIMAx-II Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst_jupyter_bibliothek/cds_data/index.html">CDS Datensatz Notebooks </a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../rst_jupyter_bibliothek/satellite_data/index.html">Satellitendaten Notebooks </a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01-senthub-downloader.html">Satellitendaten-Explorer und -Downloader mit SentinelHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="02-sentinel2-without-esri.html">Sentinel 2 - Workflow</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Landsat-Daten: Erkunden und Herunterladen mit landsatxplore</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#festlegen-der-pfade-und-arbeitsverzeichnisse">1. Festlegen der Pfade und Arbeitsverzeichnisse</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filtern-und-abrufen-von-satellitenbild-metadaten">2. Filtern und Abrufen von Satellitenbild-Metadaten</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#api-und-authentifizierung">2.1 API und Authentifizierung</a></li>
<li class="toctree-l4"><a class="reference internal" href="#definieren-der-abfrageparameter-fur-die-daten">2.2 Definieren der Abfrageparameter für die Daten</a></li>
<li class="toctree-l4"><a class="reference internal" href="#suche-nach-verfugbaren-szenen">2.2 Suche nach verfügbaren Szenen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#erstellen-eines-dictionaries-zur-speicherung-aller-szeneninformationen">2.3 Erstellen eines Dictionaries zur Speicherung aller Szeneninformationen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#visualisierung-der-szenen-als-polygone-auf-einer-karte">2.3 Visualisierung der Szenen als Polygone auf einer Karte</a></li>
<li class="toctree-l4"><a class="reference internal" href="#herunterladen-der-szene-n-mit-der-display-id">2.5 Herunterladen der Szene(n) mit der Display-ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="#extrahieren-der-tar-datei-im-ordner">2.6 Extrahieren der TAR-Datei im Ordner</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#rgb-bander-zu-einer-einzelnen-geotiff-datei-zusammenfuhren">3. RGB-Bänder zu einer einzelnen GeoTIFF-Datei zusammenführen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#erstellen-eines-dataframes-aller-verfugbaren-dateien">3.1 Erstellen eines DataFrames aller verfügbaren Dateien</a></li>
<li class="toctree-l4"><a class="reference internal" href="#definieren-eines-dictionaries-fur-die-zuordnung-der-bandnamen">3.2 Definieren eines Dictionaries für die Zuordnung der Bandnamen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#definieren-einer-funktion-zum-speichern-eines-zusammengefuhrten-geotiff-rasters">3.3 Definieren einer Funktion zum Speichern eines zusammengeführten GeoTIFF-Rasters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#speichern-des-geotiff-rasters">3.4 Speichern des GeoTIFF-Rasters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#satellitenbildanalyse-und-visualisierung">4. Satellitenbildanalyse und Visualisierung</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fernerkundungsindizes">4.1 Fernerkundungsindizes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#normalisierter-vegetationsindex-ndvi">4.2 Normalisierter Vegetationsindex (NDVI)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#bodentemperatur">5. Bodentemperatur</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lst-fur-den-gesamten-datensatz-plotten">5.1 LST für den gesamten Datensatz plotten</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lst-fur-den-interessenbereich-zeichnen">5.2 LST für den Interessenbereich zeichnen</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../rst_jupyter_bibliothek/visualizations/index.html">Visualization Options Library</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Coklimax</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../rst_jupyter_bibliothek/satellite_data/index.html">Satellitendaten Notebooks </a></li>
      <li class="breadcrumb-item active">Landsat-Daten: Erkunden und Herunterladen mit landsatxplore</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/notebooks/kurs3_satellit/03-landsat-with-landsatxplore.ipynb.txt" rel="nofollow"> Quelltext anzeigen</a>
<div id='language-switcher' style='text-align: right; margin-top: 10px;'>
    <select onchange="location = this.value;">
        <option value='/./CoKLIMAx-II/en\notebooks\kurs3_satellit\03-landsat-with-landsatxplore.html'>EN</option>
        <option value='/./CoKLIMAx-II/de\notebooks\kurs3_satellit\03-landsat-with-landsatxplore.html' selected>DE</option>
    </select>
</div>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="landsat-daten-erkunden-und-herunterladen-mit-landsatxplore">
<h1>Landsat-Daten: Erkunden und Herunterladen mit landsatxplore<a class="headerlink" href="#landsat-daten-erkunden-und-herunterladen-mit-landsatxplore" title="Link to this heading"></a></h1>
<p><strong>landsatxplore</strong> ist eine Python-Bibliothek, die für das Suchen und Herunterladen von Landsat-Bildern von der USGS EarthExplorer-Plattform entwickelt wurde. Sie ermöglicht es Benutzern, Landsat-Datensätze nach verschiedenen Parametern wie Standort, Datum und Bewölkungsgrad abzufragen und die entsprechenden Bilder herunterzuladen. Dieses Tool vereinfacht den Zugriff auf und die Arbeit mit Satellitenbildern für Analyse und Visualisierung in Python.</p>
<p><strong>Informationen zur Bibliothek:</strong></p>
<ul class="simple">
<li><p>Bibliothek: landsatxplore</p></li>
<li><p>Autor: str.ucture GmbH</p></li>
<li><p>Notebook-Version: 1.3 (Aktualisiert: 10. Januar 2024)</p></li>
</ul>
<p>Während die Bibliothek Open-Source ist, hat sie mehrere Einschränkungen:</p>
<ul class="simple">
<li><p>Satellitenbilder werden als <strong>.tar</strong>-Dateien heruntergeladen, wobei jedes Band als separates GeoTIFF gespeichert wird.</p></li>
<li><p>Es fehlt an Funktionalität, um Bilder nach Bounding Box zu filtern oder zuzuschneiden, was zusätzliche Nachbearbeitung erfordert.</p></li>
<li><p>Veraltet (letztes Update vor 3 Jahren); die Installation könnte andere Bibliotheken stören. Verwenden Sie <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--upgrade</span> <span class="pre">libraryName</span></code>, falls Probleme auftreten.</p></li>
</ul>
<section id="festlegen-der-pfade-und-arbeitsverzeichnisse">
<h2>1. Festlegen der Pfade und Arbeitsverzeichnisse<a class="headerlink" href="#festlegen-der-pfade-und-arbeitsverzeichnisse" title="Link to this heading"></a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="sd">&#39;&#39;&#39; ---- Verzeichnisse hier angeben ---- &#39;&#39;&#39;</span>
<span class="n">download_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;.\data\landsatxplorer\download&quot;</span>
<span class="n">working_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;.\data\landsatxplorer\working&quot;</span>
<span class="n">geotiff_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;.\data\landsatxplorer\geotiff&quot;</span>
<span class="n">csv_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;.\data\landsatxplorer\csv&quot;</span>
<span class="n">output_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;.\data\landsatxplorer\output&quot;</span>
<span class="sd">&#39;&#39;&#39; ----- Ende der Angaben ---- &#39;&#39;&#39;</span>

<span class="c1"># Create directories if they do not exist</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">download_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">working_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">geotiff_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">csv_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="filtern-und-abrufen-von-satellitenbild-metadaten">
<h2>2. Filtern und Abrufen von Satellitenbild-Metadaten<a class="headerlink" href="#filtern-und-abrufen-von-satellitenbild-metadaten" title="Link to this heading"></a></h2>
<section id="api-und-authentifizierung">
<h3>2.1 API und Authentifizierung<a class="headerlink" href="#api-und-authentifizierung" title="Link to this heading"></a></h3>
<p>Um sich bei der USGS-API zu authentifizieren, folgen Sie diesen Schritten:</p>
<ol class="arabic simple">
<li><p><strong>Registrieren</strong>: Erstellen Sie ein Konto auf der <a class="reference external" href="https://ers.cr.usgs.gov/register/" rel="noreferrer" target="_blank">USGS-Registrierungsseite</a>.</p></li>
<li><p><strong>Erhalten Sie die Anmeldedaten</strong>: Nach der Registrierung gehen Sie zu <strong>„Application Tokens“</strong> und klicken Sie auf <strong>„Create Application Token“</strong>.</p>
<ul class="simple">
<li><p>Wählen Sie einen Namen für das Token und setzen Sie ein Ablaufdatum.</p></li>
<li><p>Stellen Sie sicher, dass <strong>M2M API</strong> ausgewählt ist.</p></li>
<li><p>Sobald das Token erstellt wurde, kopieren Sie es und speichern Sie es sicher, da es nach <strong>60 Sekunden</strong> nicht mehr sichtbar ist.</p></li>
</ul>
</li>
</ol>
<section id="beispiel">
<h4><strong>Beispiel</strong>:<a class="headerlink" href="#beispiel" title="Link to this heading"></a></h4>
<p>Die <code class="docutils literal notranslate"><span class="pre">*.json</span></code>-Datei sollte folgendes Format haben:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;your_username&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;your_token&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<hr class="docutils" />
<ul class="simple">
<li><p><strong>Wichtig</strong>: Aufgrund von Änderungen im Authentifizierungsprozess bei USGS ist jetzt ein API-Token anstelle eines Passworts erforderlich. Da der ursprüngliche Mitwirkende landsatxplore nicht mehr pflegt, verwendet dieses Notebook ein anderes GitHub-Repository, in dem ein anderer Mitwirkender die notwendigen Authentifizierungsaktualisierungen implementiert hat.</p></li>
<li><p>Um die funktionierende Version von landsatxplore zu installieren, führen Sie den folgenden Befehl aus:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">git+https://github.com/jsearcy1/landsatxplore.git</span></code></p></li>
</ul>
<hr class="docutils" />
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">landsatxplore.api</span><span class="w"> </span><span class="kn">import</span> <span class="n">API</span>

<span class="c1"># Laden Sie die Anmeldedaten aus der lokalen JSON-Datei</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;D:/usgs.json&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">credentials</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="n">username</span> <span class="o">=</span> <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;token&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="definieren-der-abfrageparameter-fur-die-daten">
<h3>2.2 Definieren der Abfrageparameter für die Daten<a class="headerlink" href="#definieren-der-abfrageparameter-fur-die-daten" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Definieren des Datensatznamens und der Suchparameter</span>
<span class="c1"># Der Datensatzname und die Datensatz-ID können unter https://github.com/yannforget/landsatxplore gefunden werden</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;landsat_ot_c2_l2&#39;</span>
<span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="mf">47.6780</span><span class="p">,</span> <span class="mf">9.1737</span><span class="p">]</span>  <span class="c1"># Konstanz</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="s1">&#39;2020-01-01&#39;</span>
<span class="n">end_date</span> <span class="o">=</span> <span class="s1">&#39;2020-10-01&#39;</span>
<span class="n">max_cloud_cover</span> <span class="o">=</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="suche-nach-verfugbaren-szenen">
<h3>2.2 Suche nach verfügbaren Szenen<a class="headerlink" href="#suche-nach-verfugbaren-szenen" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Authentifizieren Sie sich bei der USGS-API</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">API</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>

<span class="c1"># Suche nach verfügbaren Szenen für den angegebenen Datensatz</span>
<span class="n">scenes</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
    <span class="n">dataset</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">,</span>
    <span class="n">latitude</span> <span class="o">=</span> <span class="n">latlon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="n">longitude</span> <span class="o">=</span> <span class="n">latlon</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">start_date</span><span class="p">,</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">end_date</span><span class="p">,</span>
    <span class="n">max_cloud_cover</span> <span class="o">=</span> <span class="n">max_cloud_cover</span>
<span class="p">)</span>

<span class="c1"># Ausgabe der Anzahl der gefundenen Szenen</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">scenes</span><span class="p">)</span><span class="si">}</span><span class="s2"> Szenen gefunden.&quot;</span><span class="p">)</span>

<span class="c1"># Abmelden von der API</span>
<span class="n">api</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8 Szenen gefunden.
</pre></div>
</div>
</div>
</div>
</section>
<section id="erstellen-eines-dictionaries-zur-speicherung-aller-szeneninformationen">
<h3>2.3 Erstellen eines Dictionaries zur Speicherung aller Szeneninformationen<a class="headerlink" href="#erstellen-eines-dictionaries-zur-speicherung-aller-szeneninformationen" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># Konvertieren der Szenendaten in ein DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span>
    <span class="p">{</span>
        <span class="s2">&quot;entity_id&quot;</span><span class="p">:</span> <span class="n">scene</span><span class="p">[</span><span class="s2">&quot;entity_id&quot;</span><span class="p">],</span>
        <span class="s2">&quot;display_id&quot;</span><span class="p">:</span> <span class="n">scene</span><span class="p">[</span><span class="s2">&quot;display_id&quot;</span><span class="p">],</span>
        <span class="s2">&quot;acq_date&quot;</span><span class="p">:</span> <span class="n">scene</span><span class="p">[</span><span class="s2">&quot;acquisition_date&quot;</span><span class="p">],</span>
        <span class="s2">&quot;scene_cloud_cover&quot;</span><span class="p">:</span> <span class="n">scene</span><span class="p">[</span><span class="s2">&quot;scene_cloud_cover&quot;</span><span class="p">],</span>
        <span class="s2">&quot;land_cloud_cover&quot;</span><span class="p">:</span> <span class="n">scene</span><span class="p">[</span><span class="s2">&quot;land_cloud_cover&quot;</span><span class="p">],</span>
        <span class="c1"># &quot;image_quality&quot;: scene[&quot;image_quality&quot;],  # Auskommentieren, falls benötigt</span>
        <span class="c1"># &quot;day_night&quot;: scene[&quot;day-night_indicator&quot;],  # Auskommentieren, falls benötigt</span>
        <span class="s2">&quot;sun_azimuth&quot;</span><span class="p">:</span> <span class="n">scene</span><span class="p">[</span><span class="s2">&quot;sun_azimuth_l0ra&quot;</span><span class="p">],</span>  <span class="c1"># Empfohlener Bereich: 90-270 Grad</span>
        <span class="s2">&quot;sun_elevation&quot;</span><span class="p">:</span> <span class="n">scene</span><span class="p">[</span><span class="s2">&quot;sun_elevation_l0ra&quot;</span><span class="p">]</span>  <span class="c1"># Empfohlener Bereich: 50-90 Grad</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="n">scene</span> <span class="ow">in</span> <span class="n">scenes</span>
<span class="p">])</span>

<span class="c1"># Ändern der Pandas-Anzeigeoptionen</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_colwidth&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>

<span class="c1"># Anzeige des DataFrames</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>entity_id</th>
      <th>display_id</th>
      <th>acq_date</th>
      <th>scene_cloud_cover</th>
      <th>land_cloud_cover</th>
      <th>sun_azimuth</th>
      <th>sun_elevation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LC819502720...</td>
      <td>LC08_L2SP_1...</td>
      <td>2020-09-12</td>
      <td>9.18</td>
      <td>9.18</td>
      <td>156.215019</td>
      <td>44.101558</td>
    </tr>
    <tr>
      <th>1</th>
      <td>LC819402720...</td>
      <td>LC08_L2SP_1...</td>
      <td>2020-08-20</td>
      <td>5.51</td>
      <td>5.51</td>
      <td>149.829906</td>
      <td>51.441079</td>
    </tr>
    <tr>
      <th>2</th>
      <td>LC819502720...</td>
      <td>LC08_L2SP_1...</td>
      <td>2020-08-11</td>
      <td>8.02</td>
      <td>8.02</td>
      <td>147.421532</td>
      <td>53.924649</td>
    </tr>
    <tr>
      <th>3</th>
      <td>LC819502720...</td>
      <td>LC08_L2SP_1...</td>
      <td>2020-06-24</td>
      <td>3.12</td>
      <td>3.12</td>
      <td>141.817662</td>
      <td>61.728886</td>
    </tr>
    <tr>
      <th>4</th>
      <td>LC819402720...</td>
      <td>LC08_L2SP_1...</td>
      <td>2020-06-01</td>
      <td>5.08</td>
      <td>5.08</td>
      <td>144.886824</td>
      <td>61.052324</td>
    </tr>
    <tr>
      <th>5</th>
      <td>LC819502720...</td>
      <td>LC08_L2SP_1...</td>
      <td>2020-05-07</td>
      <td>1.80</td>
      <td>1.80</td>
      <td>149.179967</td>
      <td>56.408805</td>
    </tr>
    <tr>
      <th>6</th>
      <td>LC819502720...</td>
      <td>LC08_L2SP_1...</td>
      <td>2020-04-05</td>
      <td>2.01</td>
      <td>2.01</td>
      <td>152.809102</td>
      <td>45.887567</td>
    </tr>
    <tr>
      <th>7</th>
      <td>LC819502720...</td>
      <td>LC08_L2SP_1...</td>
      <td>2020-01-16</td>
      <td>1.56</td>
      <td>1.56</td>
      <td>159.999515</td>
      <td>19.169424</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="visualisierung-der-szenen-als-polygone-auf-einer-karte">
<h3>2.3 Visualisierung der Szenen als Polygone auf einer Karte<a class="headerlink" href="#visualisierung-der-szenen-als-polygone-auf-einer-karte" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">folium</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapely</span><span class="w"> </span><span class="kn">import</span> <span class="n">wkt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="c1"># Definieren der Farbkarte mit normalisierten Indizes</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s2">&quot;turbo&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

<span class="c1"># Initialisieren der Folium-Karte mit einer Standardposition</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="mf">47.5</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">],</span>
               <span class="n">zoom_start</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
               <span class="n">height</span><span class="o">=</span><span class="mi">450</span><span class="p">,</span>
               <span class="n">scrollWheelZoom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Schleife durch die Szenen, um Polygone hinzuzufügen</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">scene</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">scenes</span><span class="p">):</span>
    <span class="n">entity_id</span> <span class="o">=</span> <span class="n">scene</span><span class="p">[</span><span class="s1">&#39;entity_id&#39;</span><span class="p">]</span>
    <span class="n">entity_cc</span> <span class="o">=</span> <span class="n">scene</span><span class="p">[</span><span class="s1">&#39;cloud_cover&#39;</span><span class="p">]</span>
    <span class="n">polygon_wkt</span> <span class="o">=</span> <span class="n">scene</span><span class="p">[</span><span class="s2">&quot;spatial_coverage&quot;</span><span class="p">]</span>

    <span class="c1"># Parsen des Polygons aus dem WKT-String</span>
    <span class="n">polygon</span> <span class="o">=</span> <span class="n">wkt</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">polygon_wkt</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">polygon_wkt</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">polygon_wkt</span>

    <span class="c1"># Generieren der Farbe basierend auf dem Index</span>
    <span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cmap</span><span class="p">(</span><span class="n">i</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]]</span>

    <span class="c1"># Erstellen einer Feature-Gruppe für jede Szene</span>
    <span class="n">polygon_fg</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ID: </span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2"> (CC: </span><span class="si">{</span><span class="n">entity_cc</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="c1"># Hinzufügen des Polygons zur Karte</span>
    <span class="n">folium</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span>
        <span class="n">locations</span><span class="o">=</span><span class="p">[(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">)</span> <span class="k">for</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="ow">in</span> <span class="n">polygon</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">],</span>
        <span class="n">color</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;rgb(</span><span class="si">{</span><span class="n">color</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">color</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
        <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">fill_opacity</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">polygon_fg</span><span class="p">)</span>

    <span class="c1"># Hinzufügen der Feature-Gruppe zur Karte</span>
    <span class="n">polygon_fg</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="c1"># Hinzufügen der Layer-Steuerung und Anzeigen der Karte</span>
<span class="n">folium</span><span class="o">.</span><span class="n">LayerControl</span><span class="p">()</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="n">m</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
    
        &lt;script&gt;
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        &lt;/script&gt;
    
    &lt;style&gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}&lt;/style&gt;
    &lt;style&gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}&lt;/style&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;
    
            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
                #map_9ed29c598e3a1ae42ca58e271fe2f694 {
                    position: relative;
                    width: 100.0%;
                    height: 450.0px;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            &lt;/style&gt;
        
&lt;/head&gt;
&lt;body&gt;
    
    
            &lt;div class=&quot;folium-map&quot; id=&quot;map_9ed29c598e3a1ae42ca58e271fe2f694&quot; &gt;&lt;/div&gt;
        
&lt;/body&gt;
&lt;script&gt;
    
    
            var map_9ed29c598e3a1ae42ca58e271fe2f694 = L.map(
                &quot;map_9ed29c598e3a1ae42ca58e271fe2f694&quot;,
                {
                    center: [47.5, 8.0],
                    crs: L.CRS.EPSG3857,
                    ...{
  &quot;zoom&quot;: 7,
  &quot;zoomControl&quot;: true,
  &quot;preferCanvas&quot;: false,
  &quot;scrollWheelZoom&quot;: false,
}

                }
            );

            

        
    
            var tile_layer_bc9979165f4dadacab24b895e59c8863 = L.tileLayer(
                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {
  &quot;minZoom&quot;: 0,
  &quot;maxZoom&quot;: 19,
  &quot;maxNativeZoom&quot;: 19,
  &quot;noWrap&quot;: false,
  &quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors&quot;,
  &quot;subdomains&quot;: &quot;abc&quot;,
  &quot;detectRetina&quot;: false,
  &quot;tms&quot;: false,
  &quot;opacity&quot;: 1,
}

            );
        
    
            tile_layer_bc9979165f4dadacab24b895e59c8863.addTo(map_9ed29c598e3a1ae42ca58e271fe2f694);
        
    
            var feature_group_da6d7099a35e132d2a0e1126f7af19ec = L.featureGroup(
                {
}
            );
        
    
            var polygon_d66204338027055282a6e28419260c07 = L.polygon(
                [[46.80577, 6.4291], [46.36914, 8.84615], [48.07038, 9.54652], [48.51237, 7.05177], [46.80577, 6.4291]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(48, 18, 59)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(48, 18, 59)&quot;, &quot;fillOpacity&quot;: 0.1, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_da6d7099a35e132d2a0e1126f7af19ec);
        
    
            feature_group_da6d7099a35e132d2a0e1126f7af19ec.addTo(map_9ed29c598e3a1ae42ca58e271fe2f694);
        
    
            var feature_group_6612c504e89ae125e05b6177e1a4ddfc = L.featureGroup(
                {
}
            );
        
    
            var polygon_e78d5b0cf54c7ffb2593c30374f1eb25 = L.polygon(
                [[46.8056, 7.99131], [46.36892, 10.40793], [48.07023, 11.10851], [48.51226, 8.61421], [46.8056, 7.99131]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(61, 55, 145)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(61, 55, 145)&quot;, &quot;fillOpacity&quot;: 0.1, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_6612c504e89ae125e05b6177e1a4ddfc);
        
    
            feature_group_6612c504e89ae125e05b6177e1a4ddfc.addTo(map_9ed29c598e3a1ae42ca58e271fe2f694);
        
    
            var feature_group_925cec961550b761be6b1232e11c8999 = L.featureGroup(
                {
}
            );
        
    
            var polygon_41f0f6fe40e77666213ab29f7751b412 = L.polygon(
                [[46.80565, 6.45436], [46.36907, 8.8704], [48.07049, 9.571], [48.51243, 7.07728], [46.80565, 6.45436]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(69, 91, 206)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(69, 91, 206)&quot;, &quot;fillOpacity&quot;: 0.1, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_925cec961550b761be6b1232e11c8999);
        
    
            feature_group_925cec961550b761be6b1232e11c8999.addTo(map_9ed29c598e3a1ae42ca58e271fe2f694);
        
    
            var feature_group_ed79326b76c320f9e331c90432c1a0d9 = L.featureGroup(
                {
}
            );
        
    
            var polygon_bc1b00db972ec0784307bc7e13437dd3 = L.polygon(
                [[46.80596, 6.4331], [46.3692, 8.84952], [48.07053, 9.5503], [48.51266, 7.05617], [46.80596, 6.4331]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(70, 127, 246)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(70, 127, 246)&quot;, &quot;fillOpacity&quot;: 0.1, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_ed79326b76c320f9e331c90432c1a0d9);
        
    
            feature_group_ed79326b76c320f9e331c90432c1a0d9.addTo(map_9ed29c598e3a1ae42ca58e271fe2f694);
        
    
            var feature_group_09e4f8c78011c532ad2f9f12d7e3a874 = L.featureGroup(
                {
}
            );
        
    
            var polygon_d0a7c883a81c483983ca90c2a91c554a = L.polygon(
                [[46.80604, 7.99023], [46.3691, 10.40725], [48.07029, 11.10803], [48.5126, 8.6133], [46.80604, 7.99023]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(59, 160, 252)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(59, 160, 252)&quot;, &quot;fillOpacity&quot;: 0.1, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_09e4f8c78011c532ad2f9f12d7e3a874);
        
    
            feature_group_09e4f8c78011c532ad2f9f12d7e3a874.addTo(map_9ed29c598e3a1ae42ca58e271fe2f694);
        
    
            var feature_group_59d97fecf6234c5d1dfee19b3fee6e7a = L.featureGroup(
                {
}
            );
        
    
            var polygon_485332950ed0a8dd5931bef2cc6bb4c9 = L.polygon(
                [[46.80476, 6.3759], [46.3697, 8.79304], [48.07143, 9.49114], [48.5118, 6.99625], [46.80476, 6.3759]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(35, 194, 228)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(35, 194, 228)&quot;, &quot;fillOpacity&quot;: 0.1, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_59d97fecf6234c5d1dfee19b3fee6e7a);
        
    
            feature_group_59d97fecf6234c5d1dfee19b3fee6e7a.addTo(map_9ed29c598e3a1ae42ca58e271fe2f694);
        
    
            var feature_group_3c54b2a725e519d743d6dbdedfb0821a = L.featureGroup(
                {
}
            );
        
    
            var polygon_6d2e9c3be23d5ca0a4147977f04cf97a = L.polygon(
                [[46.80459, 6.40358], [46.36947, 8.82002], [48.07129, 9.51843], [48.51172, 7.02425], [46.80459, 6.40358]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(23, 220, 194)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(23, 220, 194)&quot;, &quot;fillOpacity&quot;: 0.1, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_3c54b2a725e519d743d6dbdedfb0821a);
        
    
            feature_group_3c54b2a725e519d743d6dbdedfb0821a.addTo(map_9ed29c598e3a1ae42ca58e271fe2f694);
        
    
            var feature_group_d908e971d5b79c2ddc7fcc461064f939 = L.featureGroup(
                {
}
            );
        
    
            var polygon_61bc6342ebc435ea1b6ff22e033949a6 = L.polygon(
                [[46.80518, 6.43038], [46.36934, 8.84755], [48.07084, 9.54674], [48.512, 7.05183], [46.80518, 6.43038]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(44, 239, 157)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(44, 239, 157)&quot;, &quot;fillOpacity&quot;: 0.1, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_d908e971d5b79c2ddc7fcc461064f939);
        
    
            feature_group_d908e971d5b79c2ddc7fcc461064f939.addTo(map_9ed29c598e3a1ae42ca58e271fe2f694);
        
    
            var layer_control_f49fb4935db3415b64be9fa0af55e465_layers = {
                base_layers : {
                    &quot;openstreetmap&quot; : tile_layer_bc9979165f4dadacab24b895e59c8863,
                },
                overlays :  {
                    &quot;ID: LC81950272020256LGN00 (CC: 9)&quot; : feature_group_da6d7099a35e132d2a0e1126f7af19ec,
                    &quot;ID: LC81940272020233LGN00 (CC: 6)&quot; : feature_group_6612c504e89ae125e05b6177e1a4ddfc,
                    &quot;ID: LC81950272020224LGN00 (CC: 8)&quot; : feature_group_925cec961550b761be6b1232e11c8999,
                    &quot;ID: LC81950272020176LGN00 (CC: 3)&quot; : feature_group_ed79326b76c320f9e331c90432c1a0d9,
                    &quot;ID: LC81940272020153LGN00 (CC: 5)&quot; : feature_group_09e4f8c78011c532ad2f9f12d7e3a874,
                    &quot;ID: LC81950272020128LGN00 (CC: 2)&quot; : feature_group_59d97fecf6234c5d1dfee19b3fee6e7a,
                    &quot;ID: LC81950272020096LGN00 (CC: 2)&quot; : feature_group_3c54b2a725e519d743d6dbdedfb0821a,
                    &quot;ID: LC81950272020016LGN00 (CC: 2)&quot; : feature_group_d908e971d5b79c2ddc7fcc461064f939,
                },
            };
            let layer_control_f49fb4935db3415b64be9fa0af55e465 = L.control.layers(
                layer_control_f49fb4935db3415b64be9fa0af55e465_layers.base_layers,
                layer_control_f49fb4935db3415b64be9fa0af55e465_layers.overlays,
                {
  &quot;position&quot;: &quot;topright&quot;,
  &quot;collapsed&quot;: true,
  &quot;autoZIndex&quot;: true,
}
            ).addTo(map_9ed29c598e3a1ae42ca58e271fe2f694);

        
&lt;/script&gt;
&lt;/html&gt;" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div></div></div>
</div>
</section>
<section id="herunterladen-der-szene-n-mit-der-display-id">
<h3>2.5 Herunterladen der Szene(n) mit der Display-ID<a class="headerlink" href="#herunterladen-der-szene-n-mit-der-display-id" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">landsatxplore.earthexplorer</span><span class="w"> </span><span class="kn">import</span> <span class="n">EarthExplorer</span>

<span class="c1"># Initialisieren von EarthExplorer</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">API</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
<span class="n">ee</span> <span class="o">=</span> <span class="n">EarthExplorer</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>

<span class="c1"># Definieren der Szenenkennung und des Download-Pfades</span>
<span class="n">identifier</span> <span class="o">=</span> <span class="s1">&#39;LC08_L2SP_195027_20200624_20200824_02_T1&#39;</span>
<span class="n">download_filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">identifier</span><span class="si">}</span><span class="s2">.tar&quot;</span>
<span class="n">download_filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">download_folder</span><span class="p">,</span> <span class="n">download_filename</span><span class="p">)</span>

<span class="c1"># Den Datensatz nur herunterladen, wenn er noch nicht heruntergeladen wurde</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">download_filepath</span><span class="p">):</span>
    <span class="n">ee</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">identifier</span><span class="o">=</span><span class="n">identifier</span><span class="p">,</span> <span class="n">output_dir</span><span class="o">=</span><span class="n">download_folder</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Der Datensatz </span><span class="si">{</span><span class="n">identifier</span><span class="si">}</span><span class="s2"> wurde bereits heruntergeladen. Download überspringen.&quot;</span><span class="p">)</span>

<span class="c1"># Abmelden von der API und EarthExplorer</span>
<span class="n">api</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>
<span class="n">ee</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Der Datensatz LC08_L2SP_195027_20200624_20200824_02_T1 wurde bereits heruntergeladen. Download überspringen.
</pre></div>
</div>
</div>
</div>
</section>
<section id="extrahieren-der-tar-datei-im-ordner">
<h3>2.6 Extrahieren der TAR-Datei im Ordner<a class="headerlink" href="#extrahieren-der-tar-datei-im-ordner" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">tarfile</span>

<span class="c1"># Definieren des Extraktionsordner-Pfades</span>
<span class="n">extract_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">working_folder</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">extract_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Extrahieren der ZIP-Datei</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">extract_folder</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">download_filepath</span><span class="p">)</span> <span class="k">as</span> <span class="n">tar</span><span class="p">:</span>
            <span class="n">tar</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">extract_folder</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dateien erfolgreich extrahiert nach: </span><span class="si">{</span><span class="n">extract_folder</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Ordner ist nicht leer. Extraktion wird übersprungen.&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fehler: Die Datei </span><span class="si">{</span><span class="n">download_filepath</span><span class="si">}</span><span class="s2"> wurde nicht gefunden.&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">BadZipFile</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fehler: Die Datei </span><span class="si">{</span><span class="n">download_filepath</span><span class="si">}</span><span class="s2"> ist keine gültige ZIP-Datei.&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ein unerwarteter Fehler ist aufgetreten: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Ordner ist nicht leer. Extraktion wird übersprungen.
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="rgb-bander-zu-einer-einzelnen-geotiff-datei-zusammenfuhren">
<h2>3. RGB-Bänder zu einer einzelnen GeoTIFF-Datei zusammenführen<a class="headerlink" href="#rgb-bander-zu-einer-einzelnen-geotiff-datei-zusammenfuhren" title="Link to this heading"></a></h2>
<section id="erstellen-eines-dataframes-aller-verfugbaren-dateien">
<h3>3.1 Erstellen eines DataFrames aller verfügbaren Dateien<a class="headerlink" href="#erstellen-eines-dataframes-aller-verfugbaren-dateien" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">re</span>

<span class="c1"># Extrahieren der Metadaten aus dem Dateinamen.</span>
<span class="k">def</span><span class="w"> </span><span class="nf">meta</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
        <span class="n">path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">extract_folder</span><span class="p">,</span> <span class="n">filename</span><span class="p">),</span>
        <span class="n">bandname</span><span class="o">=</span><span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">identifier</span><span class="si">}</span><span class="s2">_&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="p">)</span>

<span class="c1"># Erstellen eines DataFrames aus der Liste der .TIF-Dateien im extrahierten Verzeichnis</span>
<span class="n">file_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">meta</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">extract_folder</span><span class="p">)</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.TIF&#39;</span><span class="p">)]</span>
<span class="n">df_files</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">file_list</span><span class="p">)</span>

<span class="c1"># Anzeige des DataFrames</span>
<span class="n">df_files</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filename</th>
      <th>path</th>
      <th>bandname</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>QA_PIXEL</td>
    </tr>
    <tr>
      <th>1</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>QA_RADSAT</td>
    </tr>
    <tr>
      <th>2</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>SR_B1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>SR_B2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>SR_B3</td>
    </tr>
    <tr>
      <th>5</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>SR_B4</td>
    </tr>
    <tr>
      <th>6</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>SR_B5</td>
    </tr>
    <tr>
      <th>7</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>SR_B6</td>
    </tr>
    <tr>
      <th>8</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>SR_B7</td>
    </tr>
    <tr>
      <th>9</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>SR_QA_AEROSOL</td>
    </tr>
    <tr>
      <th>10</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>ST_ATRAN</td>
    </tr>
    <tr>
      <th>11</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>ST_B10</td>
    </tr>
    <tr>
      <th>12</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>ST_CDIST</td>
    </tr>
    <tr>
      <th>13</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>ST_DRAD</td>
    </tr>
    <tr>
      <th>14</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>ST_EMIS</td>
    </tr>
    <tr>
      <th>15</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>ST_EMSD</td>
    </tr>
    <tr>
      <th>16</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>ST_QA</td>
    </tr>
    <tr>
      <th>17</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>ST_TRAD</td>
    </tr>
    <tr>
      <th>18</th>
      <td>LC08_L2SP_1...</td>
      <td>.\data\land...</td>
      <td>ST_URAD</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="definieren-eines-dictionaries-fur-die-zuordnung-der-bandnamen">
<h3>3.2 Definieren eines Dictionaries für die Zuordnung der Bandnamen<a class="headerlink" href="#definieren-eines-dictionaries-fur-die-zuordnung-der-bandnamen" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Dictionary zur Zuordnung von Bandnamen zu deren Beschreibungen</span>
<span class="n">band_descriptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;QA_PIXEL&#39;</span><span class="p">:</span> <span class="s1">&#39;Qualitätsbewertung der Pixel (allgemeine Qualitätsinformationen zu jedem Pixel)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;QA_RADSAT&#39;</span><span class="p">:</span> <span class="s1">&#39;Qualitätsbewertung für Rad-Sättigung&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SR_B1&#39;</span><span class="p">:</span> <span class="s1">&#39;Band 1: Küstennah/Aerosol (430-450 nm)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SR_B2&#39;</span><span class="p">:</span> <span class="s1">&#39;Band 2: Blau (450-515 nm)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SR_B3&#39;</span><span class="p">:</span> <span class="s1">&#39;Band 3: Grün (525-600 nm)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SR_B4&#39;</span><span class="p">:</span> <span class="s1">&#39;Band 4: Rot (630-680 nm)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SR_B5&#39;</span><span class="p">:</span> <span class="s1">&#39;Band 5: Nahes Infrarot (NIR) (850-880 nm)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SR_B6&#39;</span><span class="p">:</span> <span class="s1">&#39;Band 6: Kurzwelliges Infrarot 1 (SWIR1) (1570-1650 nm)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SR_B7&#39;</span><span class="p">:</span> <span class="s1">&#39;Band 7: Kurzwelliges Infrarot 2 (SWIR2) (2110-2290 nm)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SR_QA_AEROSOL&#39;</span><span class="p">:</span> <span class="s1">&#39;Qualitätsbewertung für Aerosol (bezogen auf atmosphärische Bedingungen)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ST_ATRAN&#39;</span><span class="p">:</span> <span class="s1">&#39;Atmosphärische Transmission (Fraktion der eingehenden Solarstrahlung)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ST_B10&#39;</span><span class="p">:</span> <span class="s1">&#39;Band 10: Thermisches Infrarot 1 (TIR1) (10,60-11,19 µm)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ST_CDIST&#39;</span><span class="p">:</span> <span class="s1">&#39;Wolkendistanz (Abstand zur nächsten Wolke)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ST_DRAD&#39;</span><span class="p">:</span> <span class="s1">&#39;Radiance (Energie pro Flächeneinheit)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ST_EMIS&#39;</span><span class="p">:</span> <span class="s1">&#39;Emissivität (bezogen auf die Oberflächentemperatur)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ST_EMSD&#39;</span><span class="p">:</span> <span class="s1">&#39;Emissivitätsstandardabweichung&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ST_QA&#39;</span><span class="p">:</span> <span class="s1">&#39;Qualitätsbewertung für thermische Bänder&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ST_TRAD&#39;</span><span class="p">:</span> <span class="s1">&#39;Strahlende Temperatur (gemessen in Kelvin)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ST_URAD&#39;</span><span class="p">:</span> <span class="s1">&#39;Aufsteigende Radiance (Energie, die von der Oberfläche ausgeht)&#39;</span>
<span class="p">}</span>

<span class="c1"># Ändern der Pandas-Anzeigeoptionen</span>
<span class="n">pd</span><span class="o">.</span><span class="n">reset_option</span><span class="p">(</span><span class="s1">&#39;display.max_colwidth&#39;</span><span class="p">)</span>

<span class="c1"># Zuordnen der Bandnamen zu den Beschreibungen und Erstellen einer neuen &#39;remarks&#39;-Spalte</span>
<span class="n">df_files</span><span class="p">[</span><span class="s1">&#39;remarks&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_files</span><span class="p">[</span><span class="s1">&#39;bandname&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">band_descriptions</span><span class="p">)</span>

<span class="c1"># Nur relevante Spalten anzeigen</span>
<span class="n">df_files</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df_files</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;bandname&#39;</span><span class="p">,</span> <span class="s1">&#39;remarks&#39;</span><span class="p">])]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>bandname</th>
      <th>remarks</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>QA_PIXEL</td>
      <td>Qualitätsbewertung der Pixel (allgemeine Quali...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>QA_RADSAT</td>
      <td>Qualitätsbewertung für Rad-Sättigung</td>
    </tr>
    <tr>
      <th>2</th>
      <td>SR_B1</td>
      <td>Band 1: Küstennah/Aerosol (430-450 nm)</td>
    </tr>
    <tr>
      <th>3</th>
      <td>SR_B2</td>
      <td>Band 2: Blau (450-515 nm)</td>
    </tr>
    <tr>
      <th>4</th>
      <td>SR_B3</td>
      <td>Band 3: Grün (525-600 nm)</td>
    </tr>
    <tr>
      <th>5</th>
      <td>SR_B4</td>
      <td>Band 4: Rot (630-680 nm)</td>
    </tr>
    <tr>
      <th>6</th>
      <td>SR_B5</td>
      <td>Band 5: Nahes Infrarot (NIR) (850-880 nm)</td>
    </tr>
    <tr>
      <th>7</th>
      <td>SR_B6</td>
      <td>Band 6: Kurzwelliges Infrarot 1 (SWIR1) (1570-...</td>
    </tr>
    <tr>
      <th>8</th>
      <td>SR_B7</td>
      <td>Band 7: Kurzwelliges Infrarot 2 (SWIR2) (2110-...</td>
    </tr>
    <tr>
      <th>9</th>
      <td>SR_QA_AEROSOL</td>
      <td>Qualitätsbewertung für Aerosol (bezogen auf at...</td>
    </tr>
    <tr>
      <th>10</th>
      <td>ST_ATRAN</td>
      <td>Atmosphärische Transmission (Fraktion der eing...</td>
    </tr>
    <tr>
      <th>11</th>
      <td>ST_B10</td>
      <td>Band 10: Thermisches Infrarot 1 (TIR1) (10,60-...</td>
    </tr>
    <tr>
      <th>12</th>
      <td>ST_CDIST</td>
      <td>Wolkendistanz (Abstand zur nächsten Wolke)</td>
    </tr>
    <tr>
      <th>13</th>
      <td>ST_DRAD</td>
      <td>Radiance (Energie pro Flächeneinheit)</td>
    </tr>
    <tr>
      <th>14</th>
      <td>ST_EMIS</td>
      <td>Emissivität (bezogen auf die Oberflächentemper...</td>
    </tr>
    <tr>
      <th>15</th>
      <td>ST_EMSD</td>
      <td>Emissivitätsstandardabweichung</td>
    </tr>
    <tr>
      <th>16</th>
      <td>ST_QA</td>
      <td>Qualitätsbewertung für thermische Bänder</td>
    </tr>
    <tr>
      <th>17</th>
      <td>ST_TRAD</td>
      <td>Strahlende Temperatur (gemessen in Kelvin)</td>
    </tr>
    <tr>
      <th>18</th>
      <td>ST_URAD</td>
      <td>Aufsteigende Radiance (Energie, die von der Ob...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="definieren-einer-funktion-zum-speichern-eines-zusammengefuhrten-geotiff-rasters">
<h3>3.3 Definieren einer Funktion zum Speichern eines zusammengeführten GeoTIFF-Rasters<a class="headerlink" href="#definieren-einer-funktion-zum-speichern-eines-zusammengefuhrten-geotiff-rasters" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">rasterio</span>

<span class="k">def</span><span class="w"> </span><span class="nf">apply_reflectance_correction</span><span class="p">(</span><span class="n">band_data</span><span class="p">,</span> <span class="n">bandname</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">bandname</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;SR_B1&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B2&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B3&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B4&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B5&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B6&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B7&#39;</span><span class="p">]:</span>
        <span class="c1"># Apply the reflectance correction (for bands 1-7)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">band_data</span> <span class="o">*</span> <span class="mf">2.75e-5</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.2</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">band_data</span>

<span class="k">def</span><span class="w"> </span><span class="nf">apply_thermal_correction</span><span class="p">(</span><span class="n">band_data</span><span class="p">,</span> <span class="n">bandname</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">bandname</span> <span class="o">==</span> <span class="s1">&#39;ST_B10&#39;</span><span class="p">:</span>
        <span class="c1"># Apply the thermal correction (for band 10)</span>
        <span class="n">corrected_data</span> <span class="o">=</span> <span class="p">(</span><span class="n">band_data</span> <span class="o">*</span> <span class="mf">0.00341802</span><span class="p">)</span> <span class="o">+</span> <span class="mf">149.0</span>
        
        <span class="c1"># Set values of 0 to NoData (cloud cover) using the NoData value</span>
        <span class="n">corrected_data</span><span class="p">[</span><span class="n">band_data</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">no_data_value</span>
        
        <span class="k">return</span> <span class="n">corrected_data</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">band_data</span>

<span class="k">def</span><span class="w"> </span><span class="nf">merge_tif</span><span class="p">(</span><span class="n">output_filename</span><span class="p">,</span> <span class="n">bandname_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_list</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">stacked_data</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="c1"># Open the first file to determine the NoData value for the output</span>
    <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;path&#39;</span><span class="p">])</span> <span class="k">as</span> <span class="n">first_band</span><span class="p">:</span>
        <span class="n">no_data_value</span> <span class="o">=</span> <span class="n">first_band</span><span class="o">.</span><span class="n">nodata</span>  <span class="c1"># Retrieve the NoData value from the input raster</span>
    
    <span class="k">for</span> <span class="n">bandname</span> <span class="ow">in</span> <span class="n">bandname_list</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">file</span><span class="p">[</span><span class="s1">&#39;bandname&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">bandname</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">])</span> <span class="k">as</span> <span class="n">band_data</span><span class="p">:</span>
                    <span class="n">band_array</span> <span class="o">=</span> <span class="n">band_data</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Read the first band as array</span>
                    <span class="c1"># Apply corrections based on bandname</span>
                    <span class="k">if</span> <span class="n">bandname</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;SR_B1&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B2&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B3&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B4&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B5&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B6&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B7&#39;</span><span class="p">]:</span>
                        <span class="n">band_array</span> <span class="o">=</span> <span class="n">apply_reflectance_correction</span><span class="p">(</span><span class="n">band_array</span><span class="p">,</span> <span class="n">bandname</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">bandname</span> <span class="o">==</span> <span class="s1">&#39;ST_B10&#39;</span><span class="p">:</span>
                        <span class="n">band_array</span> <span class="o">=</span> <span class="n">apply_thermal_correction</span><span class="p">(</span><span class="n">band_array</span><span class="p">,</span> <span class="n">bandname</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">)</span>
                    <span class="n">stacked_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">band_array</span><span class="p">)</span>

    <span class="c1"># Write the merged bands into a new raster file</span>
    <span class="n">output_filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">geotiff_folder</span><span class="p">,</span><span class="n">output_filename</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span>
        <span class="n">output_filepath</span><span class="p">,</span>
        <span class="s1">&#39;w&#39;</span><span class="p">,</span>
        <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">stacked_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">width</span><span class="o">=</span><span class="n">stacked_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">bandname_list</span><span class="p">),</span>
        <span class="n">dtype</span><span class="o">=</span><span class="n">stacked_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span>
        <span class="n">crs</span><span class="o">=</span><span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;path&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">crs</span><span class="p">,</span>
        <span class="n">transform</span><span class="o">=</span><span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;path&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">transform</span><span class="p">,</span>
        <span class="n">nodata</span><span class="o">=</span><span class="n">no_data_value</span>  <span class="c1"># Set the NoData value for the output file</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">dest</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">band_data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">stacked_data</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">dest</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">band_data</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="speichern-des-geotiff-rasters">
<h3>3.4 Speichern des GeoTIFF-Rasters<a class="headerlink" href="#speichern-des-geotiff-rasters" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1"># Example usage</span>
    <span class="n">bandname_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;SR_B1&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B2&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B3&#39;</span><span class="p">]</span>
    <span class="n">merge_tif</span><span class="p">(</span><span class="n">output_filename</span><span class="o">=</span><span class="s2">&quot;merged_rgb.tif&quot;</span><span class="p">,</span> <span class="n">bandname_list</span><span class="o">=</span><span class="n">bandname_list</span><span class="p">,</span> <span class="n">file_list</span><span class="o">=</span><span class="n">file_list</span><span class="p">)</span>

    <span class="c1"># Example usage</span>
    <span class="n">bandname_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ST_B10&#39;</span><span class="p">]</span>
    <span class="n">merge_tif</span><span class="p">(</span><span class="n">output_filename</span><span class="o">=</span><span class="s2">&quot;ST_B10_LST.tif&quot;</span><span class="p">,</span> <span class="n">bandname_list</span><span class="o">=</span><span class="n">bandname_list</span><span class="p">,</span> <span class="n">file_list</span><span class="o">=</span><span class="n">file_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="satellitenbildanalyse-und-visualisierung">
<h2>4. Satellitenbildanalyse und Visualisierung<a class="headerlink" href="#satellitenbildanalyse-und-visualisierung" title="Link to this heading"></a></h2>
<section id="fernerkundungsindizes">
<h3>4.1 Fernerkundungsindizes<a class="headerlink" href="#fernerkundungsindizes" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Normalisierter Vegetationsindex: NDVI = (NIR-Rot)/(NIR+Rot)</p></li>
<li><p>Normalisierter Unterschieds-Wasserindex: NDWI = (Grün-NIR)/(Grün+NIR)</p></li>
<li><p>Verbesserter Vegetationsindex: EVI = G * (NIR-Rot)/(NIR+C1 x Rot-C2 x Blau+L), wobei G=2.5, C1,C2=6,7.5, L=10000</p></li>
<li><p>Bodenangepasster Vegetationsindex: SAVI = {(NIR-Rot)*(1+L)}/{NIR + Rot + L}, wobei L: 0.5 (typisch)</p></li>
<li><p>Urbanisierungsindex: BUI = (SWIR-NIR)/(SWIR+NIR)</p></li>
</ul>
</section>
<section id="normalisierter-vegetationsindex-ndvi">
<h3>4.2 Normalisierter Vegetationsindex (NDVI)<a class="headerlink" href="#normalisierter-vegetationsindex-ndvi" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Definieren der NIR (SR_B5) und Rot (SR_B4) Bänder aus den Satellitendaten</span>
<span class="n">required_bandname_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;SR_B5&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B4&#39;</span><span class="p">]</span>

<span class="n">stacked_data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">bandname</span> <span class="ow">in</span> <span class="n">required_bandname_list</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">file</span><span class="p">[</span><span class="s1">&#39;bandname&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">bandname</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">])</span> <span class="k">as</span> <span class="n">band_data</span><span class="p">:</span>
                <span class="n">band_array</span> <span class="o">=</span> <span class="n">band_data</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">stacked_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">band_array</span><span class="p">)</span>

<span class="c1"># Berechnen des NDVI (Fügen Sie eine kleine Zahl zum Nenner hinzu, um eine Division durch Null zu vermeiden)</span>
<span class="n">ndvi</span> <span class="o">=</span> <span class="p">(</span><span class="n">stacked_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">stacked_data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">stacked_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">stacked_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mf">1e-10</span><span class="p">)</span>

<span class="n">ndvi_masked</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_where</span><span class="p">(</span><span class="n">ndvi</span> <span class="o">==</span><span class="mi">0</span><span class="p">,</span> <span class="n">ndvi</span><span class="p">)</span>

<span class="c1"># Plotten des NDVI</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s1">&#39;RdYlGn&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>
<span class="n">cmap</span><span class="o">.</span><span class="n">set_bad</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">ndvi_masked</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Hinzufügen einer Farbskala</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">fraction</span><span class="o">=</span><span class="mf">0.046</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;NDVI&#39;</span><span class="p">)</span>

<span class="c1"># Setzen des Titels für den Plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;NDVI&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>

<span class="c1"># Entfernen der Achsenticks für eine sauberere Anzeige</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

<span class="c1"># Anzeigen des Plots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/b4b076b6bd02d27ffda6a531d7a111c50aa162a4d6718fc05934137ee85c90d2.png" src="../../_images/b4b076b6bd02d27ffda6a531d7a111c50aa162a4d6718fc05934137ee85c90d2.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Definieren der NIR (SR_B5) und SWIR (SR_B6) Bänder aus den Satellitendaten</span>
<span class="n">required_bandname_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;SR_B5&#39;</span><span class="p">,</span> <span class="s1">&#39;SR_B6&#39;</span><span class="p">]</span>

<span class="n">stacked_data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">bandname</span> <span class="ow">in</span> <span class="n">required_bandname_list</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">file</span><span class="p">[</span><span class="s1">&#39;bandname&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">bandname</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">])</span> <span class="k">as</span> <span class="n">band_data</span><span class="p">:</span>
                <span class="n">band_array</span> <span class="o">=</span> <span class="n">band_data</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">stacked_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">band_array</span><span class="p">)</span>

<span class="c1"># Berechnen des NDMI (Fügen Sie eine kleine Zahl zum Nenner hinzu, um eine Division durch Null zu vermeiden)</span>
<span class="n">ndmi</span> <span class="o">=</span> <span class="p">(</span><span class="n">stacked_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">stacked_data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">stacked_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">stacked_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">1e-10</span><span class="p">)</span>

<span class="c1"># Maskieren der Nullwerte für eine bessere Visualisierung</span>
<span class="n">ndmi_masked</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_where</span><span class="p">(</span><span class="n">ndmi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ndmi</span><span class="p">)</span>

<span class="c1"># Plotten des NDMI</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s1">&#39;BrBG&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">cmap</span><span class="o">.</span><span class="n">set_bad</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">ndmi_masked</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Hinzufügen einer Farbskala</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">fraction</span><span class="o">=</span><span class="mf">0.046</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;NDMI&#39;</span><span class="p">)</span>

<span class="c1"># Setzen des Titels für den Plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;NDMI&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>

<span class="c1"># Entfernen der Achsenticks für eine sauberere Anzeige</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

<span class="c1"># Anzeigen des Plots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/94bfa5002dd4fb3b722d586ba44a6010386a9975b0554710590eb62e7388ec54.png" src="../../_images/94bfa5002dd4fb3b722d586ba44a6010386a9975b0554710590eb62e7388ec54.png" />
</div>
</div>
</section>
</section>
<section id="bodentemperatur">
<h2>5. Bodentemperatur<a class="headerlink" href="#bodentemperatur" title="Link to this heading"></a></h2>
<section id="lst-fur-den-gesamten-datensatz-plotten">
<h3>5.1 LST für den gesamten Datensatz plotten<a class="headerlink" href="#lst-fur-den-gesamten-datensatz-plotten" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">band_name</span> <span class="o">=</span> <span class="s1">&#39;ST_B10&#39;</span>

<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">file</span><span class="p">[</span><span class="s1">&#39;bandname&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">band_name</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">])</span> <span class="k">as</span> <span class="n">band_data</span><span class="p">:</span>
            <span class="n">no_data_value</span> <span class="o">=</span> <span class="n">band_data</span><span class="o">.</span><span class="n">nodata</span>        
            <span class="n">band_data_array</span> <span class="o">=</span> <span class="n">band_data</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

            <span class="c1"># Maskierte Daten für fehlende Werte</span>
            <span class="n">masked_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">band_data_array</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="mf">1e-5</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">band_data_array</span><span class="p">)</span>
            <span class="n">corrected_data</span> <span class="o">=</span> <span class="p">(</span><span class="n">masked_data</span> <span class="o">*</span> <span class="mf">0.00341802</span> <span class="o">+</span> <span class="mf">149.0</span><span class="p">)</span> <span class="o">-</span> <span class="mf">273.15</span>

<span class="c1"># Plotten der LST</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s1">&#39;jet&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">cmap</span><span class="o">.</span><span class="n">set_bad</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">corrected_data</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">10</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">fraction</span><span class="o">=</span><span class="mf">0.046</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Bodentemperatur (LST), °C&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Bodentemperatur&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="c1"># plt.axis(&#39;off&#39;)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/10bf19fdf59393016d78214d843eb9f0a0a4fd92ee050a9301d52c0d65f222ae.png" src="../../_images/10bf19fdf59393016d78214d843eb9f0a0a4fd92ee050a9301d52c0d65f222ae.png" />
</div>
</div>
</section>
<section id="lst-fur-den-interessenbereich-zeichnen">
<h3>5.2 LST für den Interessenbereich zeichnen<a class="headerlink" href="#lst-fur-den-interessenbereich-zeichnen" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### 5.2 LST für das Interessengebiet plotten</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">ticker</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.transforms</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyproj</span><span class="w"> </span><span class="kn">import</span> <span class="n">Transformer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rasterio.windows</span><span class="w"> </span><span class="kn">import</span> <span class="n">from_bounds</span>

<span class="c1"># Laden der Shapefile von Konstanz (WGS84-Projektion) für geografische Grenzfilterung</span>
<span class="n">shapefile</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;./shapefiles/kn_boundary.shp&quot;</span>
<span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">shapefile</span><span class="p">)</span>

<span class="c1"># Extrahieren der Begrenzungsbox und CRS der Shapefile</span>
<span class="n">shapefile_bounds</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">total_bounds</span>
<span class="n">shapefile_crs</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">crs</span>

<span class="c1"># Definieren des Ziel-CRS und des Transformers</span>
<span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">])</span> <span class="k">as</span> <span class="n">band_data</span><span class="p">:</span>
    <span class="n">target_crs</span> <span class="o">=</span> <span class="n">band_data</span><span class="o">.</span><span class="n">crs</span>

<span class="c1"># target_crs = &quot;EPSG:32632&quot;</span>
<span class="n">transformer</span> <span class="o">=</span> <span class="n">Transformer</span><span class="o">.</span><span class="n">from_crs</span><span class="p">(</span><span class="n">shapefile_crs</span><span class="p">,</span> <span class="n">target_crs</span><span class="p">,</span> <span class="n">always_xy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Transformieren der Koordinaten für das Interessengebiet</span>
<span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span> <span class="o">=</span> <span class="n">shapefile_bounds</span>
<span class="n">minx_new</span><span class="p">,</span> <span class="n">miny_new</span> <span class="o">=</span> <span class="n">transformer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="p">)</span>
<span class="n">maxx_new</span><span class="p">,</span> <span class="n">maxy_new</span> <span class="o">=</span> <span class="n">transformer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span><span class="p">)</span>
<span class="n">aoi_bounds</span> <span class="o">=</span> <span class="p">(</span><span class="n">minx_new</span><span class="p">,</span> <span class="n">miny_new</span><span class="p">,</span> <span class="n">maxx_new</span><span class="p">,</span> <span class="n">maxy_new</span><span class="p">)</span>

<span class="c1"># Extrahieren der Banddaten für die LST-Berechnung und das Plotten</span>
<span class="n">band_name</span> <span class="o">=</span> <span class="s1">&#39;ST_B10&#39;</span>

<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">file</span><span class="p">[</span><span class="s1">&#39;bandname&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">band_name</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">])</span> <span class="k">as</span> <span class="n">band_data</span><span class="p">:</span>
            <span class="c1"># Extrahieren des NoData-Werts für die Maskierung</span>
            <span class="n">no_data_value</span> <span class="o">=</span> <span class="n">band_data</span><span class="o">.</span><span class="n">nodata</span>

            <span class="c1"># Definieren des AOI-Fensters und Auslesen der Daten</span>
            <span class="n">aoi_window</span> <span class="o">=</span> <span class="n">from_bounds</span><span class="p">(</span><span class="o">*</span><span class="n">aoi_bounds</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">band_data</span><span class="o">.</span><span class="n">transform</span><span class="p">)</span>
            <span class="n">band_data_array</span> <span class="o">=</span> <span class="n">band_data</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="n">aoi_window</span><span class="p">)</span>
            
            <span class="c1"># Maskieren von NoData-Werten</span>
            <span class="n">masked_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">band_data_array</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="mf">1e-5</span><span class="p">),</span>
                                   <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">band_data_array</span><span class="p">)</span>
            
            <span class="c1"># Anwendung der Korrekturen: https://www.usgs.gov/landsat-missions/landsat-collection-2-surface-temperature</span>
            <span class="n">corrected_data</span> <span class="o">=</span> <span class="p">(</span><span class="n">masked_data</span> <span class="o">*</span> <span class="mf">0.00341802</span> <span class="o">+</span> <span class="mf">149.0</span><span class="p">)</span> <span class="o">-</span> <span class="mf">273.15</span>
            
            <span class="c1"># Berechnung des Transforms für das Fenster</span>
            <span class="n">window_transform</span> <span class="o">=</span> <span class="n">band_data</span><span class="o">.</span><span class="n">window_transform</span><span class="p">(</span><span class="n">aoi_window</span><span class="p">)</span>

<span class="c1"># Plotten der Bodentemperatur (LST)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s1">&#39;jet&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">cmap</span><span class="o">.</span><span class="n">set_bad</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>

<span class="c1"># Definieren der Ausdehnung für das Bild</span>
<span class="n">extent</span> <span class="o">=</span> <span class="p">(</span><span class="n">aoi_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">aoi_bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">aoi_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">aoi_bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">corrected_data</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">extent</span><span class="p">)</span>

<span class="c1"># Hinzufügen einer Farbskala</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">fraction</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Bodentemperatur (LST), °C&#39;</span><span class="p">)</span>

<span class="c1"># Formatieren der x- und y-Achsen-Ticks</span>
<span class="k">def</span><span class="w"> </span><span class="nf">fmt_two_digits</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">axis</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">ticker</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="n">fmt_two_digits</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">ticker</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="n">fmt_two_digits</span><span class="p">))</span>

<span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_yticklabels</span><span class="p">():</span>
    <span class="n">label</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
    <span class="n">label</span><span class="o">.</span><span class="n">set_verticalalignment</span><span class="p">(</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>

<span class="c1"># Setzen des Titels für das Diagramm</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Bodentemperatur&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>

<span class="c1"># Hinzufügen eines Rasters</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="c1"># Hinzufügen von Text</span>
<span class="n">text</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CRS: </span><span class="si">{</span><span class="n">target_crs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Hinzufügen einer Beschreibung</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figtext</span><span class="p">(</span><span class="mf">0.21</span><span class="p">,</span> <span class="mf">0.85</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">backgroundcolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

<span class="c1"># Anzeige des Diagramms</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/7af8c0fb437b144609df7d798844085bb75e9a3c0f3b95ff38bfcf55b1ad7e2d.png" src="../../_images/7af8c0fb437b144609df7d798844085bb75e9a3c0f3b95ff38bfcf55b1ad7e2d.png" />
</div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="02-sentinel2-without-esri.html" class="btn btn-neutral float-left" title="Sentinel 2 - Workflow" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Zurück</a>
        <a href="../../rst_jupyter_bibliothek/visualizations/index.html" class="btn btn-neutral float-right" title="Visualization Options Library" accesskey="n" rel="next">Weiter <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, str.ucture GmbH.</p>
  </div>

  Erstellt mit <a href="https://www.sphinx-doc.org/">Sphinx</a> mit einem
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    bereitgestellt von <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>