

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Landsat Downloader &mdash; Coklimax 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=a1fa38c2" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=8d563738"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="ERA5-Land Monthly Averaged" href="07%20era5-land-monthly.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Coklimax
              <img src="../../_static/coklimax_logo_new.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">INHALTE:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rst_intro/notwendige_software_und_kenntnisse.html">Required Software and Knowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst_intro/der_kurz_elemente.html">Die Kurz Elemente</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst_intro/der_cds.html">Der Copernicus Climate Data Store (CDS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst_intro/der_jupyter.html">Jupyter Notebooks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Kurs 1:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../kurs1/herunterladen_ersten_datensatzes.html">Download Your First Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kurs1/analysis_and_visualization.html">Use Case: Analysis and Visualization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Kurs 2:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../kurs2/01%20satellite-lake-water-level.html">Satellite Lake Water Levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kurs2/02%20satellite-lake-water-temperature.html">Satellite Lake Water Temperature</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kurs2/03%20sis-temperature-statistics.html">Temperature Statistics for Europe</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Kurs 3:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../kurs3/01%20senthub_downloader.html">SentinelHub Downloader</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Kurs Note Defined:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="01%20alpine-monthly-precipitation.html">Alpine monatliche Niederschlagsdaten</a></li>
<li class="toctree-l1"><a class="reference internal" href="02%20sis-heat-wave-and-cold-spells.html">Heat Wave and Cold Spells</a></li>
<li class="toctree-l1"><a class="reference internal" href="03%20sis-health-vector.html">SIS Health Vector</a></li>
<li class="toctree-l1"><a class="reference internal" href="04%20climate-indicators.html">Climate Indicators for Europe</a></li>
<li class="toctree-l1"><a class="reference internal" href="05%20sis-biodiversity-era5-regional.html">Downscaled bioclimatic indicators</a></li>
<li class="toctree-l1"><a class="reference internal" href="06%20era5_land_hourly.html">ERA5-Land Hourly Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="07%20era5-land-monthly.html">ERA5-Land Monthly Averaged</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Landsat Downloader</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#specifying-the-paths-and-working-directories">1. Specifying the paths and working directories</a></li>
<li class="toctree-l2"><a class="reference internal" href="#download-and-extract-dataset">2. Download and Extract Dataset</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#authentication">2.1 Authentication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#important-security-note">Important Security Note:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-format-of-the-credentials-file">Example Format of the Credentials File:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#search-for-the-available-scenes">2.2 Search for the available scenes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#download-the-scenes">2.3 Download the scenes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extract-the-tar-file">2.4 Extract the tar file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#merge-rgb-bands-a-single-geotiff-file">3. Merge RGB bands a single GeoTIFF file</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Coklimax</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Landsat Downloader</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/notebooks/kurs_not_defined/08 landsat_with_landsatxplore.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="landsat-downloader">
<h1>Landsat Downloader<a class="headerlink" href="#landsat-downloader" title="Link to this heading"></a></h1>
<p><strong>landsatxplorer</strong> is a Python library designed for searching and downloading Landsat imagery from the USGS EarthExplorer platform. It allows users to query Landsat datasets by various parameters like location, date, and cloud cover, and download the corresponding images. This tool simplifies the process of accessing and working with satellite imagery for analysis and visualization in Python</p>
<p><strong>Information on Library:</strong></p>
<ul class="simple">
<li><p>Author:</p></li>
<li><p>Notebook Version: 1.3 (Updated: December 03, 2024)</p></li>
</ul>
<p>Although it is open-source, there are many limitations like:</p>
<ul class="simple">
<li><p>Downloads satellite images as <strong>.tar</strong> files, with each band stored as a separate GeoTIFF.</p></li>
<li><p>Lacks functionality to filter or clip images by bounding box, requiring post-processing.</p></li>
<li><p>Outdated (last updated 3 years ago); installing it may disrupt other libraries. Use pip –upgrade libraryName if issues arise.</p></li>
</ul>
<section id="specifying-the-paths-and-working-directories">
<h2>1. Specifying the paths and working directories<a class="headerlink" href="#specifying-the-paths-and-working-directories" title="Link to this heading"></a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="sd">&#39;&#39;&#39; ---- Hier die Verzeichnisse angeben ---- &#39;&#39;&#39;</span>
<span class="n">download_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;.\data\landsatxplorer\download&quot;</span>
<span class="n">working_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;.\data\landsatxplorer\working&quot;</span>
<span class="n">geotiff_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;.\data\landsatxplorer\geotiff&quot;</span>
<span class="n">csv_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;.\data\landsatxplorer\csv&quot;</span>
<span class="n">output_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;.\data\landsatxplorer\output&quot;</span>
<span class="sd">&#39;&#39;&#39; ----- Ende der Eingaben ---- &#39;&#39;&#39;</span>

<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">download_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">working_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">geotiff_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">csv_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="download-and-extract-dataset">
<h2>2. Download and Extract Dataset<a class="headerlink" href="#download-and-extract-dataset" title="Link to this heading"></a></h2>
<section id="authentication">
<h3>2.1 Authentication<a class="headerlink" href="#authentication" title="Link to this heading"></a></h3>
<p>To authenticate with the USGS API, follow these steps:</p>
<ol class="arabic simple">
<li><p><strong>Register</strong>: Create an account at the <a class="reference external" href="https://ers.cr.usgs.gov/register/">USGS registration page</a>.</p></li>
<li><p><strong>Obtain Credentials</strong>: After registering, SAVE your credentials as a <code class="docutils literal notranslate"><span class="pre">.json</span></code> file.</p></li>
</ol>
<section id="important-security-note">
<h4>Important Security Note:<a class="headerlink" href="#important-security-note" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Keep the credentials file private</strong>: Ensure that the <code class="docutils literal notranslate"><span class="pre">.json</span></code> file containing your username and password is stored securely and cannot be accessed by unauthorized users.</p></li>
<li><p><strong>Permissions</strong>: Do not upload the credentials file to public repositories or share it with others.</p></li>
</ul>
</section>
<section id="example-format-of-the-credentials-file">
<h4>Example Format of the Credentials File:<a class="headerlink" href="#example-format-of-the-credentials-file" title="Link to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">.json</span></code> file should have the following format:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;your_username&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;password&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;your_password&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">landsatxplore.api</span><span class="w"> </span><span class="kn">import</span> <span class="n">API</span>

<span class="c1"># Load credentials from a local JSON file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;D:/usgs.json&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">credentials</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="n">username</span> <span class="o">=</span> <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;password&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="search-for-the-available-scenes">
<h3>2.2 Search for the available scenes<a class="headerlink" href="#search-for-the-available-scenes" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">api</span> <span class="o">=</span> <span class="n">API</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>

<span class="n">scenes</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
    <span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;landsat_ot_c2_l2&#39;</span><span class="p">,</span>
    <span class="n">latitude</span><span class="o">=</span><span class="mf">47.6780</span><span class="p">,</span>
    <span class="n">longitude</span><span class="o">=</span><span class="mf">9.1737</span><span class="p">,</span>
    <span class="n">start_date</span><span class="o">=</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">,</span>
    <span class="n">end_date</span><span class="o">=</span><span class="s1">&#39;2020-10-01&#39;</span><span class="p">,</span>
    <span class="n">max_cloud_cover</span><span class="o">=</span><span class="mi">10</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">scenes</span><span class="p">)</span><span class="si">}</span><span class="s2"> scenes found.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8 scenes found.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">scene</span> <span class="ow">in</span> <span class="n">scenes</span><span class="p">:</span>
    <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;entity_id&quot;</span><span class="p">:</span> <span class="n">scene</span><span class="p">[</span><span class="s2">&quot;entity_id&quot;</span><span class="p">],</span>
            <span class="s2">&quot;display_id&quot;</span><span class="p">:</span> <span class="n">scene</span><span class="p">[</span><span class="s2">&quot;display_id&quot;</span><span class="p">],</span>
            <span class="s2">&quot;acq_date&quot;</span><span class="p">:</span> <span class="n">scene</span><span class="p">[</span><span class="s2">&quot;acquisition_date&quot;</span><span class="p">],</span>
            <span class="s2">&quot;scene_cloud_cover&quot;</span><span class="p">:</span> <span class="n">scene</span><span class="p">[</span><span class="s2">&quot;scene_cloud_cover&quot;</span><span class="p">],</span>
            <span class="s2">&quot;land_cloud_cover&quot;</span><span class="p">:</span> <span class="n">scene</span><span class="p">[</span><span class="s2">&quot;land_cloud_cover&quot;</span><span class="p">],</span>
            <span class="c1"># &quot;image_quality&quot;: scene[&quot;image_quality&quot;],</span>
            <span class="c1"># &quot;day-night_indicator&quot;: scene[&quot;day-night_indicator&quot;]</span>
            <span class="p">}</span>
        <span class="p">)</span>
    
<span class="c1"># Modify pandas display options</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_colwidth</span> <span class="o">=</span> <span class="mi">30</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>entity_id</th>
      <th>display_id</th>
      <th>acq_date</th>
      <th>scene_cloud_cover</th>
      <th>land_cloud_cover</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LC81950272020256LGN00</td>
      <td>LC08_L2SP_195027_20200912_...</td>
      <td>2020-09-12</td>
      <td>9.18</td>
      <td>9.18</td>
    </tr>
    <tr>
      <th>1</th>
      <td>LC81940272020233LGN00</td>
      <td>LC08_L2SP_194027_20200820_...</td>
      <td>2020-08-20</td>
      <td>5.51</td>
      <td>5.51</td>
    </tr>
    <tr>
      <th>2</th>
      <td>LC81950272020224LGN00</td>
      <td>LC08_L2SP_195027_20200811_...</td>
      <td>2020-08-11</td>
      <td>8.02</td>
      <td>8.02</td>
    </tr>
    <tr>
      <th>3</th>
      <td>LC81950272020176LGN00</td>
      <td>LC08_L2SP_195027_20200624_...</td>
      <td>2020-06-24</td>
      <td>3.12</td>
      <td>3.12</td>
    </tr>
    <tr>
      <th>4</th>
      <td>LC81940272020153LGN00</td>
      <td>LC08_L2SP_194027_20200601_...</td>
      <td>2020-06-01</td>
      <td>5.08</td>
      <td>5.08</td>
    </tr>
    <tr>
      <th>5</th>
      <td>LC81950272020128LGN00</td>
      <td>LC08_L2SP_195027_20200507_...</td>
      <td>2020-05-07</td>
      <td>1.80</td>
      <td>1.80</td>
    </tr>
    <tr>
      <th>6</th>
      <td>LC81950272020096LGN00</td>
      <td>LC08_L2SP_195027_20200405_...</td>
      <td>2020-04-05</td>
      <td>2.01</td>
      <td>2.01</td>
    </tr>
    <tr>
      <th>7</th>
      <td>LC81950272020016LGN00</td>
      <td>LC08_L2SP_195027_20200116_...</td>
      <td>2020-01-16</td>
      <td>1.56</td>
      <td>1.56</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">folium</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapely</span><span class="w"> </span><span class="kn">import</span> <span class="n">wkt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s2">&quot;turbo&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="mf">47.5</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">],</span>
               <span class="n">zoom_start</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
               <span class="n">height</span><span class="o">=</span><span class="mi">450</span><span class="p">,</span>
               <span class="n">scrollWheelZoom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">scene</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">scenes</span><span class="p">):</span>
    <span class="n">entity_id</span> <span class="o">=</span> <span class="n">scene</span><span class="p">[</span><span class="s1">&#39;entity_id&#39;</span><span class="p">]</span>
    <span class="n">entity_cc</span> <span class="o">=</span> <span class="n">scene</span><span class="p">[</span><span class="s1">&#39;cloud_cover&#39;</span><span class="p">]</span>
    <span class="n">polygon_wkt</span> <span class="o">=</span> <span class="n">scene</span><span class="p">[</span><span class="s2">&quot;spatial_coverage&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">polygon_wkt</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">polygon</span> <span class="o">=</span> <span class="n">wkt</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">polygon_wkt</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">polygon</span> <span class="o">=</span> <span class="n">polygon_wkt</span>

    <span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cmap</span><span class="p">(</span><span class="n">i</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]]</span>
    <span class="n">polygon_fg</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;str</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2"> (CC: </span><span class="si">{</span><span class="n">entity_cc</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
    <span class="n">folium</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span>
        <span class="n">locations</span><span class="o">=</span><span class="p">[(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">)</span> <span class="k">for</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="ow">in</span> <span class="n">polygon</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">],</span>
        <span class="n">color</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;rgb(</span><span class="si">{</span><span class="n">color</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">color</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
        <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">fill_opacity</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">polygon_fg</span><span class="p">)</span>

    <span class="n">polygon_fg</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="n">folium</span><span class="o">.</span><span class="n">LayerControl</span><span class="p">()</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="n">m</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
    
        &lt;script&gt;
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        &lt;/script&gt;
    
    &lt;style&gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}&lt;/style&gt;
    &lt;style&gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}&lt;/style&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;
    
            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
                #map_0b64880a05d74736fa718ef44bd93569 {
                    position: relative;
                    width: 100.0%;
                    height: 450.0px;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            &lt;/style&gt;
        
&lt;/head&gt;
&lt;body&gt;
    
    
            &lt;div class=&quot;folium-map&quot; id=&quot;map_0b64880a05d74736fa718ef44bd93569&quot; &gt;&lt;/div&gt;
        
&lt;/body&gt;
&lt;script&gt;
    
    
            var map_0b64880a05d74736fa718ef44bd93569 = L.map(
                &quot;map_0b64880a05d74736fa718ef44bd93569&quot;,
                {
                    center: [47.5, 8.0],
                    crs: L.CRS.EPSG3857,
                    ...{
  &quot;zoom&quot;: 7,
  &quot;zoomControl&quot;: true,
  &quot;preferCanvas&quot;: false,
  &quot;scrollWheelZoom&quot;: false,
}

                }
            );

            

        
    
            var tile_layer_2d8142037934c52f2c27281567cd7023 = L.tileLayer(
                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {
  &quot;minZoom&quot;: 0,
  &quot;maxZoom&quot;: 19,
  &quot;maxNativeZoom&quot;: 19,
  &quot;noWrap&quot;: false,
  &quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors&quot;,
  &quot;subdomains&quot;: &quot;abc&quot;,
  &quot;detectRetina&quot;: false,
  &quot;tms&quot;: false,
  &quot;opacity&quot;: 1,
}

            );
        
    
            tile_layer_2d8142037934c52f2c27281567cd7023.addTo(map_0b64880a05d74736fa718ef44bd93569);
        
    
            var feature_group_ae2483782e62f3cbc713ddcc54560759 = L.featureGroup(
                {
}
            );
        
    
            var polygon_669013c468385a295ceccf0934f51236 = L.polygon(
                [[46.80577, 6.4291], [46.36914, 8.84615], [48.07038, 9.54652], [48.51237, 7.05177], [46.80577, 6.4291]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(48, 18, 59)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(48, 18, 59)&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_ae2483782e62f3cbc713ddcc54560759);
        
    
            feature_group_ae2483782e62f3cbc713ddcc54560759.addTo(map_0b64880a05d74736fa718ef44bd93569);
        
    
            var feature_group_01b53b7134ead9b5969a1994da2aff6a = L.featureGroup(
                {
}
            );
        
    
            var polygon_3e6e11678aeb9a79c06038bdce38f322 = L.polygon(
                [[46.8056, 7.99131], [46.36892, 10.40793], [48.07023, 11.10851], [48.51226, 8.61421], [46.8056, 7.99131]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(61, 55, 145)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(61, 55, 145)&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_01b53b7134ead9b5969a1994da2aff6a);
        
    
            feature_group_01b53b7134ead9b5969a1994da2aff6a.addTo(map_0b64880a05d74736fa718ef44bd93569);
        
    
            var feature_group_cf4b1393887c48fdc841bf57afc59643 = L.featureGroup(
                {
}
            );
        
    
            var polygon_7a26c9b9d2bbde481af51267a8871f23 = L.polygon(
                [[46.80565, 6.45436], [46.36907, 8.8704], [48.07049, 9.571], [48.51243, 7.07728], [46.80565, 6.45436]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(69, 91, 206)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(69, 91, 206)&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_cf4b1393887c48fdc841bf57afc59643);
        
    
            feature_group_cf4b1393887c48fdc841bf57afc59643.addTo(map_0b64880a05d74736fa718ef44bd93569);
        
    
            var feature_group_23543651f8637f2a663f248e0217c84e = L.featureGroup(
                {
}
            );
        
    
            var polygon_1c3ea5c190d40c6a43a487265910d852 = L.polygon(
                [[46.80596, 6.4331], [46.3692, 8.84952], [48.07053, 9.5503], [48.51266, 7.05617], [46.80596, 6.4331]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(70, 127, 246)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(70, 127, 246)&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_23543651f8637f2a663f248e0217c84e);
        
    
            feature_group_23543651f8637f2a663f248e0217c84e.addTo(map_0b64880a05d74736fa718ef44bd93569);
        
    
            var feature_group_cee7156d8b0e4eae725105f9a5473324 = L.featureGroup(
                {
}
            );
        
    
            var polygon_1650e1806f1bbbae60cc49d8eb3ac91d = L.polygon(
                [[46.80604, 7.99023], [46.3691, 10.40725], [48.07029, 11.10803], [48.5126, 8.6133], [46.80604, 7.99023]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(59, 160, 252)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(59, 160, 252)&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_cee7156d8b0e4eae725105f9a5473324);
        
    
            feature_group_cee7156d8b0e4eae725105f9a5473324.addTo(map_0b64880a05d74736fa718ef44bd93569);
        
    
            var feature_group_fe4f817c427ffa3b1f7635fee7271e5e = L.featureGroup(
                {
}
            );
        
    
            var polygon_7f9e33a3e0cac2afdd218f3f545a5aa3 = L.polygon(
                [[46.80476, 6.3759], [46.3697, 8.79304], [48.07143, 9.49114], [48.5118, 6.99625], [46.80476, 6.3759]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(35, 194, 228)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(35, 194, 228)&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_fe4f817c427ffa3b1f7635fee7271e5e);
        
    
            feature_group_fe4f817c427ffa3b1f7635fee7271e5e.addTo(map_0b64880a05d74736fa718ef44bd93569);
        
    
            var feature_group_c6fd8a318ece2cb0c72bc0feac3468c3 = L.featureGroup(
                {
}
            );
        
    
            var polygon_74d206ad8d2626dd9d777ca01d75da85 = L.polygon(
                [[46.80459, 6.40358], [46.36947, 8.82002], [48.07129, 9.51843], [48.51172, 7.02425], [46.80459, 6.40358]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(23, 220, 194)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(23, 220, 194)&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_c6fd8a318ece2cb0c72bc0feac3468c3);
        
    
            feature_group_c6fd8a318ece2cb0c72bc0feac3468c3.addTo(map_0b64880a05d74736fa718ef44bd93569);
        
    
            var feature_group_27046cc9e663ab7c10790a86612c0920 = L.featureGroup(
                {
}
            );
        
    
            var polygon_88140bfb799a3b7291bbaa0261d67f2b = L.polygon(
                [[46.80518, 6.43038], [46.36934, 8.84755], [48.07084, 9.54674], [48.512, 7.05183], [46.80518, 6.43038]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;rgb(44, 239, 157)&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;rgb(44, 239, 157)&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_27046cc9e663ab7c10790a86612c0920);
        
    
            feature_group_27046cc9e663ab7c10790a86612c0920.addTo(map_0b64880a05d74736fa718ef44bd93569);
        
    
            var layer_control_64ecea777e09c2317f85b9179b0d4299_layers = {
                base_layers : {
                    &quot;openstreetmap&quot; : tile_layer_2d8142037934c52f2c27281567cd7023,
                },
                overlays :  {
                    &quot;strLC81950272020256LGN00 (CC: 9)&quot; : feature_group_ae2483782e62f3cbc713ddcc54560759,
                    &quot;strLC81940272020233LGN00 (CC: 6)&quot; : feature_group_01b53b7134ead9b5969a1994da2aff6a,
                    &quot;strLC81950272020224LGN00 (CC: 8)&quot; : feature_group_cf4b1393887c48fdc841bf57afc59643,
                    &quot;strLC81950272020176LGN00 (CC: 3)&quot; : feature_group_23543651f8637f2a663f248e0217c84e,
                    &quot;strLC81940272020153LGN00 (CC: 5)&quot; : feature_group_cee7156d8b0e4eae725105f9a5473324,
                    &quot;strLC81950272020128LGN00 (CC: 2)&quot; : feature_group_fe4f817c427ffa3b1f7635fee7271e5e,
                    &quot;strLC81950272020096LGN00 (CC: 2)&quot; : feature_group_c6fd8a318ece2cb0c72bc0feac3468c3,
                    &quot;strLC81950272020016LGN00 (CC: 2)&quot; : feature_group_27046cc9e663ab7c10790a86612c0920,
                },
            };
            let layer_control_64ecea777e09c2317f85b9179b0d4299 = L.control.layers(
                layer_control_64ecea777e09c2317f85b9179b0d4299_layers.base_layers,
                layer_control_64ecea777e09c2317f85b9179b0d4299_layers.overlays,
                {
  &quot;position&quot;: &quot;topright&quot;,
  &quot;collapsed&quot;: true,
  &quot;autoZIndex&quot;: true,
}
            ).addTo(map_0b64880a05d74736fa718ef44bd93569);

        
&lt;/script&gt;
&lt;/html&gt;" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div></div></div>
</div>
</section>
<section id="download-the-scenes">
<h3>2.3 Download the scenes<a class="headerlink" href="#download-the-scenes" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">landsatxplore.earthexplorer</span><span class="w"> </span><span class="kn">import</span> <span class="n">EarthExplorer</span>

<span class="n">ee</span> <span class="o">=</span> <span class="n">EarthExplorer</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>

<span class="n">identifier</span> <span class="o">=</span> <span class="s1">&#39;LC08_L2SP_204025_20200927_20201006_02_T1&#39;</span>
<span class="n">download_filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">identifier</span><span class="si">}</span><span class="s2">.tar&quot;</span>
<span class="n">download_filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">download_folder</span><span class="p">,</span> <span class="n">download_filename</span><span class="p">)</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">download_filepath</span><span class="p">):</span>
    <span class="n">ee</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">identifier</span><span class="o">=</span><span class="n">identifier</span><span class="p">,</span>
                <span class="n">output_dir</span><span class="o">=</span><span class="n">download_folder</span><span class="p">,</span>
                <span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The dataset, </span><span class="si">{</span><span class="n">identifier</span><span class="si">}</span><span class="s2">, is already downloaded. Skipping Download.&quot;</span><span class="p">)</span>

<span class="n">api</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>
<span class="n">ee</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The dataset, LC08_L2SP_204025_20200927_20201006_02_T1, is already downloaded. Skipping Download.
</pre></div>
</div>
</div>
</div>
</section>
<section id="extract-the-tar-file">
<h3>2.4 Extract the tar file<a class="headerlink" href="#extract-the-tar-file" title="Link to this heading"></a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">tarfile</span>

<span class="c1"># Define paths</span>
<span class="n">extract_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">working_folder</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">extract_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">extract_folder</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">download_filepath</span><span class="p">)</span> <span class="k">as</span> <span class="n">tar</span><span class="p">:</span>
        <span class="n">tar</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">extract_folder</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">extract_folder</span><span class="si">}</span><span class="s2">&#39; is not empty. Skipping extraction.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;.\data\landsatxplorer\working\LC08_L2SP_204025_20200927_20201006_02_T1&#39; is not empty. Skipping extraction.
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="merge-rgb-bands-a-single-geotiff-file">
<h2>3. Merge RGB bands a single GeoTIFF file<a class="headerlink" href="#merge-rgb-bands-a-single-geotiff-file" title="Link to this heading"></a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">file_list</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">extract_folder</span><span class="p">)</span>
<span class="n">file_list</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;LC08_L2SP_204025_20200927_20201006_02_T1_ANG.txt&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_MTL.json&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_MTL.txt&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_MTL.xml&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_QA_PIXEL.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_QA_RADSAT.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_SR_B1.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_SR_B2.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_SR_B3.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_SR_B4.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_SR_B5.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_SR_B6.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_SR_B7.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_SR_QA_AEROSOL.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_SR_stac.json&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_ST_ATRAN.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_ST_B10.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_ST_CDIST.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_ST_DRAD.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_ST_EMIS.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_ST_EMSD.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_ST_QA.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_ST_stac.json&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_ST_TRAD.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_ST_URAD.TIF&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_thumb_large.jpeg&#39;,
 &#39;LC08_L2SP_204025_20200927_20201006_02_T1_thumb_small.jpeg&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># import rasterio</span>
<span class="c1"># import os</span>
<span class="c1"># from rasterio.merge import merge</span>

<span class="c1"># files = [</span>
<span class="c1">#     &#39;./data/landsatxplorer/working/LC08_L2SP_195027_20200507_20200820_02_T1_SR_B2.TIF&#39;,</span>
<span class="c1">#     &#39;./data/landsatxplorer/working/LC08_L2SP_195027_20200507_20200820_02_T1_SR_B3.TIF&#39;,</span>
<span class="c1">#     &#39;./data/landsatxplorer/working/LC08_L2SP_195027_20200507_20200820_02_T1_SR_B4.TIF&#39;</span>
<span class="c1"># ]</span>

<span class="c1"># datasets = [rasterio.open(f) for f in files]</span>

<span class="c1"># merged_data, merged_transform = merge(datasets)</span>

<span class="c1"># metadata = datasets[0].meta</span>
<span class="c1"># metadata.update({</span>
<span class="c1">#     &#39;count&#39;: len(datasets),  # Number of bands in the merged file</span>
<span class="c1">#     &#39;transform&#39;: merged_transform</span>
<span class="c1"># })</span>

<span class="c1"># output_file = r&#39;G:/merged.tif&#39;</span>

<span class="c1"># with rasterio.open(output_file, &#39;w&#39;, **metadata) as dst:</span>
<span class="c1">#     # Loop through each band in the merged data</span>
<span class="c1">#     for i in range(len(datasets)):</span>
<span class="c1">#         dst.write(merged_data[i], i+1)  # i+1 because band indexes in GeoTIFF start from 1</span>

<span class="c1"># print(f&quot;Merged GeoTIFF file saved as {output_file}&quot;)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="07%20era5-land-monthly.html" class="btn btn-neutral float-left" title="ERA5-Land Monthly Averaged" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, str.ucture GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>